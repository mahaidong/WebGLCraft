{
  "version": 3,
  "file": "cameraControls.js",
  "sourceRoot": "../",
  "sources": [
    "lib/cameraControls.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "@MouseEvent =\r\n    isLeftButton: (event) -> event.which == 1\r\n    isRightButton: (event) -> event.which == 3\r\n    isLeftButtonDown: (event) -> event.button == 0 and @isLeftButton event\r\n\r\nclass @CamControls\r\n    # object: PerspectiveCamera\r\n    # https://threejs.org/docs/#api/en/core/Object3D\r\n    constructor: (object, domElement) ->\r\n        @object = object\r\n        @target = new THREE.Vector3 0, 0, 0\r\n        @domElement = domElement or document\r\n\r\n        @lookSpeed = 0.20\r\n        @mouseX = 0\r\n        @mouseY = 0\r\n        @lat = -66.59\r\n        @lon = -31.8\r\n\r\n        @deltaX = 0\r\n        @deltaY = 0\r\n\r\n        @mouseDragOn = false\r\n        @anchorx = null\r\n        @anchory = null\r\n        @mouseLocked = false\r\n        @defineBindings()\r\n        @showCrosshair()\r\n\r\n    enableMouseLocked: -> @mouseLocked = true\r\n    disableMouseLocked: -> @mouseLocked = false\r\n\r\n    defineBindings: ->\r\n        $(document).mousemove (e) => @onMouseMove e\r\n        $(@domElement).mousedown (e) => @onMouseDown e\r\n        $(@domElement).mouseup (e) => @onMouseUp e\r\n        $(@domElement).mouseenter (e) => @onMouserEnter e\r\n\r\n    showCrosshair: -> document.getElementById('cursor').style.display = 'block'\r\n    hideCrosshair: -> document.getElementById('cursor').style.display = 'none'\r\n\r\n    onMouserEnter: (event) ->\r\n        @onMouseUp(event) unless MouseEvent.isLeftButtonDown event\r\n\r\n    onMouseDown: (event) ->\r\n        return unless MouseEvent.isLeftButton event\r\n        @domElement.focus() if @mouseLocked and @domElement isnt document\r\n        @anchorx = event.pageX\r\n        @anchory = event.pageY\r\n        @setMouse @anchorx, @anchory\r\n        @mouseDragOn = true\r\n        return false\r\n\r\n    onMouseUp: (event) ->\r\n        @mouseDragOn = false\r\n        return false\r\n\r\n    setMouse: (x, y) ->\r\n        @mouseX = x\r\n        @mouseY = y\r\n        @setDelta x - @anchorx, y - @anchory\r\n\r\n    setDelta: (x, y) ->\r\n        @deltaX = x\r\n        @deltaY = y\r\n\r\n    setDirection: (dir) -> {@lat,@lon} = dir\r\n    getDirection: -> {@lat,@lon}\r\n\r\n    onMouseMove: (event) ->\r\n        if @mouseDragOn\r\n            console.log event\r\n            @setMouse event.pageX, event.pageY\r\n        else if @mouseLocked\r\n            e = event.originalEvent\r\n            x = e.movementX or e.mozMovementX or e.webkitMovementX\r\n            y = e.movementY or e.mozMovementY or e.webkitMovementY\r\n            @setDelta x, y\r\n        return\r\n\r\n    halfCircle:  Math.PI / 180\r\n\r\n    viewDirection: -> @target.clone().sub(@object.position)\r\n\r\n    move: (newPosition) ->\r\n        @object.position = newPosition\r\n        @updateLook()\r\n\r\n    updateLook: ->\r\n        {sin, cos} = Math\r\n        phi = (90 - @lat) * @halfCircle\r\n        theta = @lon * @halfCircle\r\n        p = @object.position\r\n\r\n        assoc @target,\r\n            x: p.x + 100 * sin(phi) * cos(theta)\r\n            y: p.y + 100 * cos(phi)\r\n            z: p.z + 100 * sin(phi) * sin(theta)\r\n\r\n        @object.lookAt @target\r\n        return\r\n\r\n    update: ->\r\n        return unless @mouseDragOn or @mouseLocked\r\n        return if @mouseDragOn and @mouseX is @anchorx and @mouseY is @anchory\r\n\r\n        {max, min} = Math\r\n\r\n        if @mouseLocked\r\n            return if @deltaX is @previousDeltaX and @deltaY is @previousDeltaY\r\n            @previousDeltaX = @deltaX\r\n            @previousDeltaY = @deltaY\r\n            @anchorx = window.innerWidth/2\r\n            @anchory = window.innerHeight/2\r\n        else if @mouseDragOn\r\n            return if @mouseX is @anchorx and @mouseY is @anchory\r\n            @anchorx = @mouseX\r\n            @anchory = @mouseY\r\n\r\n        @lon += @deltaX * @lookSpeed\r\n        @lat -= @deltaY * @lookSpeed\r\n        @lat = max(-85, min(85, @lat))\r\n        @updateLook()\r\n\r\n        return\r\n\r\n"
  ]
}